<head>
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
    crossorigin="anonymous"
  />
</head>

<form class="flex items-center max-w-sm mx-auto">   
  <label for="simple-search" class="sr-only">Search</label>
  <div class="relative w-full">
      <div class="absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none">
          <svg class="w-4 h-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 18 20">
              <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5v10M3 5a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 10a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm12 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm0 0V6a3 3 0 0 0-3-3H9m1.5-2-2 2 2 2"/>
          </svg>
      </div>
      <input type="text" id="simple-search" class=" select_style text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full ps-10 p-2.5 dark:border-gray-600 dark:placeholder-gray-400  dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Recherchez un prestataire..." (input)="searchPrestataire($event)" />
  </div>
</form>


<div class="relative overflow-x-auto shadow-md sm:rounded-lg">
  <!-- text-gray-500 dark:text-gray-400 -->
  <table class="w-full text-sm text-left rtl:text-right">
    <thead class="text-xs text-gray-700 uppercase">
      <tr>
        <th scope="col" class="px-6 py-3">nom</th>
        <th scope="col" class="px-6 py-3">service</th>
        <th scope="col" class="px-6 py-3">tarif</th>
        <th scope="col" class="px-6 py-3">Action</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let presta of prestataire; let i = index">
        <th
          scope="row"
          class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"
        >
          {{ presta.user?.name }}
        </th>
        <td class="px-6 py-4">
          {{ presta.services }}
        </td>
        <td class="px-6 py-4">{{ presta.tarif }} CFA</td>
        <td class="px-6 py-4 flex justify-around">
          <i
            data-bs-toggle="modal"
            [attr.data-bs-target]="'#confirmacceptModalLabel' + i"
            class="fa-solid fa-envelope text-2xl cursor-pointer"
            title="Inviter"
          ></i>
          <a [routerLink]="['/profil', presta.user?.identifiant_bizzare]">
            <i
              class="fa-solid fa-user text-2xl cursor-pointer"
              title="Profil"
            ></i>
          </a>
        </td>
        <!-- modal pour confirmer acceptation -->
        <div
          class="modal fade 0"
          [id]="'confirmacceptModalLabel' + i"
          tabindex="-1"
          aria-labelledby="exampleModalLabel"
          aria-hidden="true"
        >
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content mdal">
              <div class="modal-header">
                <h5 class="modal-title" id="confirmacceptModalLabel">
                  Voulez vous confirmer ?
                </h5>
                <button
                  type="button"
                  class="btn-close"
                  data-bs-dismiss="modal"
                  aria-label="Close"
                ></button>
              </div>
              <div
                class="modal-body"
                style="
                  max-width: 500px;
                  white-space: pre-wrap;
                  overflow-x: clip;
                "
              >
                Invitation de {{ presta.user?.name }} a votre evenement
                {{ presta.nom }} ?

                <select
                  class="form-select select_style"
                  aria-label="Default select example"
                  [(ngModel)]="selectedEventId"
                >
                  <option selected value="0">Selectionnez un evenement</option>
                    <option *ngFor="let event of evenements" [value]="event.id" >
                      {{ event.nom }}
                    </option>
                </select>
                <label for="message" class="block mb-2 text-sm font-medium">Your message</label>
                <textarea
                  id="message"
                  [(ngModel)]="message"
                  rows="4"
                  class="select_style block p-2.5 w-full text-sm 0 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500"
                  placeholder="Description de l'evenement"
                ></textarea>
              </div>
              <div class="modal-footer">
                <button
                  type="button"
                  class="bg-blue-700 text-white w-[100px] h-[40px] rounded-2"
                  data-bs-dismiss="modal"
                  (click)="inviter(presta.user?.id ,selectedEventId, message)"
                >
                  Inviter
                </button>
                <button
                  type="button"
                  class="bg-red-700 text-white w-[100px] h-[40px] rounded-2"
                  data-bs-dismiss="modal"
                >
                  Fermer
                </button>
              </div>
            </div>
          </div>
        </div>
        <!--      Modal pour confirmer la rejet-->
      </tr>
    </tbody>
  </table>
</div>
